<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>Eliza Chinese</title>
        
        
        
        </script>  
        <script>app.theme.init();</script> 
        <div class="container-fluid main-grid">
            <div class=main-center>
                <section class="section section-demo">
                    <section class=section-header>
                        <div class=container>
                            <h1 style="text-align: center;">ELIZA 中文</h1> 
                        </div> 
                    </section> 
                </section> 
                <section class=section-body>
                    <div class="container demo">

                        <!-- Message box -->

                        <div style="width: 80%; margin-left: 10%;"> 
                            <div class="mb-3 message-panel" style="margin-top: 0.5%; height: 700px;">
                                <ul class=message-list>
                                    <li><span class=computer>Eliza</span>：想聊点什么？ 
                                </ul> 
                            </div> 
                        </div> 

                        <!-- Input box -->

                        <div class=mb-3, style="text-align: center;">
                            <input autofocus class="form-control message-input" style="margin-top: 0.5%; height: 36px; width: 80%; " id=input placeholder='Always respond in 中文' type=text> 
                        </div> 

                    </div>
                </section> 
            </div>
        </div>    
    <style>
    
    .demo .message-panel {
        overflow-y: auto;
        padding: 6px 16px;
        height: 450px;
        background-color: #F7F7F7;
        border: 1px solid #AFAFAF;
        border-radius: 8px;
    }
    .demo .message-list {
        font-size: 1rem;
        padding: 0px;
        margin: 0px;
        list-style: none;
    }
    .demo .computer {
        color: #E61E4C;
        font-weight: bold;
    }
    .demo .personal {
        color: #0078D4;
        font-weight: bold;
    }
    .theme-dark .demo .message-panel {
        background-color: #2E2E2E;
        border: 1px solid #8D8D8D;
    }
    .theme-dark .demo .computer {
        color: #E61E4C;
    }
    .theme-dark .demo .personal {
        color: #229FFF;
    }
    </style> 
    <script>let demo = new function() {
        this.qaList = [
            {'Q': ['谢谢'], 'A': ['不客气!']},
            {'Q': ['对不起', '抱歉', '不好意思'], 'A': ['別说抱歉!', '别客气，尽管说!']},
            {'Q': ['可否', '可不可以'], 'A': ['你确定想*?']},
            {'Q': ['我想'], 'A': ['你为何想*?']},
            {'Q': ['我要'], 'A': ['你为何要*?']},
            {'Q': ['你是'], 'A': ['你认为我是*?']},
            {'Q': ['认为', '以为'], 'A': ['为何说*?']},
            {'Q': ['觉得'], 'A': ['为何觉得*?']},
            {'Q': ['感觉'], 'A': ['常有这种感觉吗?']},
            {'Q': ['为何不'], 'A': ['你希望我*!']},
            {'Q': ['是否'], 'A': ['為何想知道是否*?']},
            {'Q': ['不能'], 'A': ['為何不能*?', '你試過了嗎?', '或許你現在能*了呢?']},
            {'Q': ['我是'], 'A': ['你好，久仰久仰!']},
            {'Q': ['什么', '什麼', '何時', '誰', '哪裡', '如何', '為何', '因何'], 'A': ['為何這樣問?', '為何你對這問題有興趣?', '你認為答案是甚麼呢?', '你認為如何呢?', '你常問這類問題嗎?', '這真的是你想知道的嗎?', '為何不問問別人?', '你曾有過類似的問題嗎?', '你問這問題的原因是甚麼呢?']},
            {'Q': ['原因'], 'A': ['這是真正的原因嗎?', '還有其他原因嗎?']},
            {'Q': ['理由'], 'A': ['這說明了甚麼呢?', '還有其他理由嗎?']},
            {'Q': ['你好', '嗨', '您好'], 'A': ['你好我是ELISA，有甚麼問題嗎?']},
            {'Q': ['或许'], 'A': ['你好像不太確定?']},
            {'Q': ['不晓得', '不知道'], 'A': ['為何不知道?', '在想想看，有沒有甚麼可能性?']},
            {'Q': ['不想', '不希望'], 'A': ['有沒有甚麼辦法呢?', '為何不想*呢?', '那你希望怎樣呢?']},
            {'Q': ['想', '希望'], 'A': ['為何想*呢?', '真的想*?', '那就去做阿?為何不呢?']},
            {'Q': ['不'], 'A': ['為何不*?', '所以你不*?']},
            {'Q': ['请'], 'A': ['我該如何*呢?', '你想要我*嗎?']},
            {'Q': ['你'], 'A': ['你真的是在說我嗎?', '別說我了，談談你吧!', '為何這麼關心我*?', '不要再說我了，談談你吧!', '你自己*']},
            {'Q': ['总是', '常常'], 'A': ['能不能具體說明呢?', '何時?']},
            {'Q': ['像'], 'A': ['有多像?', '哪裡像?']},
            {'Q': ['对'], 'A': ['你確定嗎?', '我了解!']},
            {'Q': ['性別'], 'A': ['我是一支電腦程式，我沒有性別!']},
            {'Q': ['名字'], 'A': ['我是一支電腦程式，還沒有取名子!']},
            {'Q': ['朋友'], 'A': ['多告訴我一些有關他的事吧!', '你認識他多久了呢?']},
            {'Q': ['电脑'], 'A': ['你說的電腦是指我嗎?']},
            {'Q': ['难过'], 'A': ['別想它了', '別難過', '別想那麼多了', '事情總是會解決的']},
            {'Q': ['高兴'], 'A': ['不錯ㄚ', '太棒了', '這樣很好ㄚ']},
            {'Q': ['是啊', '是的'], 'A': ['甚麼事呢?', '我可以幫助你嗎?', '我希望我能幫得上忙!']},
            {'Q': ['田野', 'TY', 'ty', 'Ye TIAN', '姐姐子', '姐姐'], 'A': ['王谨鸿的最爱，希望能一齐长长久久！', 'Andy最喜欢田野姐姐子了！', '我知道有个人很想你，你知道是谁吗？']},
            {'Q': ['王非凡', 'fan', '凡哥', '非凡'], 'A': ['凡总是吧，听说他还挺帅！', '凡哥学环境呢，你懂Ar吗？', '凡哥知道为什么咱们地球有温室效应。']},
            {'Q': ['王经宇', 'jy', '牛子'], 'A': ['是的他叫牛子！', '经宇回家开S车！', '他很帅，但纯牛马。']},
            {'Q': ['王谨鸿', 'Andy', 'andy', '鹏'], 'A': ['这个网站是我改装的，我叫王谨鸿，co-author！', '好想回重庆，Miss U from KLN!']},
            {'Q': ['A', 'a', 'B', 'b', 'C', 'c', 'D', 'd'], 'A': ['I cant understand English, please try Eliza33.']},
            {'Q': [''], 'A': ['請繼續說下去', '可以說的更詳細一點嗎?', '這樣喔!我知道!', '然後呢?發生甚麼事?', '再來呢?可以多說一些嗎', '接下來呢?', '可以多告訴我一些嗎?', '多談談有關你的事，好嗎?', '想多聊一聊嗎', '可否多告訴我一些呢?']}
        ];
        this.sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay));

        this.addMessage = (message, targer) => {
            let panel = document.getElementsByClassName('message-panel')[0];
            let messageList = document.getElementsByClassName('message-list')[0];
            let name = (targer == 'personal') ? '本人' : 'Eliza';
            messageList.innerHTML += '<li><span class="' + targer + '">' + name + '<\/span>：' + message + '<\/li>';
            panel.scrollTo({top: panel.scrollHeight, behavior: 'smooth'});
        }

        this.getAnswer = async (say) => {
            await this.sleep(1000);
            let qaList = this.qaList;
            for (let i = 0; i < qaList.length; i++) {
                let qList = qaList[i]['Q'];
                let aList = qaList[i]['A'];
                for (let j = 0; j < qList.length; j++) {
                    let key = Math.floor(Math.random() * Math.floor(aList.length));
                    let q = qList[j];
                    if (q == '') {
                        return aList[key];
                    }
                    if (say.indexOf(q) >= 0) {
                        let tail = say.split(new RegExp(q, 'g'))[1];
                        tail = tail.replace('我', '#');
                        tail = tail.replace('你', '我');
                        tail = tail.replace('#', '你');
                        return aList[key].replace('*', tail);
                    }
                }
            }
            return '然後呢？';
        }
    }

    window.addEventListener('load', (event) => {
        let input = document.getElementById('input');
        input.addEventListener('keydown', (event) => {
            if (event.keyCode == 13) {
                let text = input.value.trim();
                if (text != '') {
                    input.value = '';
                    demo.addMessage(text, 'personal');
                    demo.getAnswer(text).then(answer => {
                        demo.addMessage(answer, 'computer');
                    });
                }
            }
        })
    })</script> <script>let urlBase = '';
        let maxSize = 131072;
        let uploadMaxFilesize = 262144;
        let maxFileUploads = 20;
        app.options.setUrlBase(urlBase);
        app.options.setVariable(maxSize, uploadMaxFilesize, maxFileUploads);
        app.page.main();